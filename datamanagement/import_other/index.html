<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Team Brawndo" />
  <title>CBBS Imaging &ndash; Non-DICOM Data</title>
  <link rel="license" hreflang="en" href="../../copyright.html" />

  <link rel="stylesheet" type="text/css" href="../../theme/css/style.css">
</head>

<body>
  <aside>
    <h1><a href="/">CBBS Imaging</a></h1>
    <nav>
      <ul>

              <li>
                <a href="../../datamanagement/">Data Management</a>

                <ul>
                  <li>
                    <a href="../../datamanagement/study_setup/">Initial Study Setup</a>
                  </li>
                  <li>
                    <a href="../../datamanagement/study_specification/">Study Metadata</a>
                  </li>
                  <li>
                    <a href="../../datamanagement/import_dicoms/">DICOM Data</a>
                  </li>
                  <li>
                    <a class="active" href="../../datamanagement/import_other/">Non-DICOM Data</a>
                  </li>
                  <li>
                    <a href="../../datamanagement/conversion/">BIDS Conversion</a>
                  </li>
                  <li>
                    <a href="../../datamanagement/tools/">Tools</a>
                  </li>
                </ul>
              </li>
              <li><a href="../../analysis/">Data Analysis</a></li>
              <li><a href="../../devices/">Acquisition Hardware</a></li>
              <li><a href="../../containers/">Computational Environments</a></li>
              <li><a href="../../contributing/">Contributing</a></li>
      </ul>
    </nav>
    <form class="searchbox" action="../../search.html">
      <input type="text" name="q" id="tipue_search_input" placeholder="Search">
    </form>
    <img src="../../theme/img/cbbs_logo.png" alt="CBBS Logo">
    <img src="../../theme/img/EFRE_logo.png"
         alt="Signets of Saxony-Anhalt and the European Regional Development Fund">
  </aside>

  <main>
    <div id='content'>
<article>
  <header>
    <nav>
      <ul class="breadcrumbs">
        <li><a href="../../">Home</a></li>
        <li> > <a href="../../datamanagement/">Data Management</a></li>
        <li> > Non-DICOM Data</li>
      </ul>
    </nav>
    <h1>Non-DICOM Data</h1>
  </header>

  <div>
    <p>Apart from DICOM files, you can (and should) add any additional data into a study dataset.
Information corresponding to any of the MR data acquisitions must be added into
the respective directory. This can be stimulation logs, behavioral response logs,
or other simultaneously acquired data. To simply add the files to the dataset,
copy or move them to the appropriate location and use <tt class="docutils literal">datalad <span class="pre">rev-save</span></tt> to make
them part of the dataset. Have a look at the <a class="reference external" href="{filename}demo_study.rst">study dataset demo</a> for an example.</p>
<p>However, in order to include the data in the conversion later on, you need to
create a <a class="reference external" href="../../datamanagement/study_specification/">specification</a> for it. This is what
<tt class="docutils literal">datalad <span class="pre">hirni-spec4anything</span></tt> is for. This will create a snippet for the data
component, containing the mandatory pieces and lets you specify all properties
of the specification needed for conversion via the same option <cite>--properties</cite>,
that is available when <a class="reference external" href="../../datamanagement/import_dicoms/">importing DICOM archives</a>.</p>
<p>Let's say you added a file <tt class="docutils literal">physio/df37_200Hz_1.txt</tt> to an acquisition. To
create a proper specification snippet for that file, from within the acquisition
directory you'd call:</p>
<pre class="literal-block">
datalad hirni-spec4anything physio/df37_200Hz_1.txt \
--properties "{'type': 'physio_file', \
               'bids_run': '01', \
               'procedures': [{'procedure-name': 'hirni-physiobox-converter'}], \
               'sampling-frequency': '200Hz'}"
</pre>
<p>Note, that the specified type is an arbitrary label you can choose to distinguish different kinds of files.
It can be used to run a conversion on that type only or to ease programmatic curation of specifications.
<tt class="docutils literal">datalad <span class="pre">hirni-spec4anything</span></tt> will also prefill the specification with values that are unambiguous throughout the already existing snippets in the respective specification file.
Hence, if you already have imported the corresponding DICOMs, things like the subject ID or a possible task label that are the same for all the specification snippets derived from the DICOM metadata will be filled into your snippet for that physio file.
You can overwrite them of course, by passing new values via that <tt class="docutils literal"><span class="pre">--properties</span></tt> option, which takes precedence over the defaults.
The result will be a snippet in the acquisitions specification file as shown on the <a class="reference external" href="../../datamanagement/study_specification/">specification page</a>:</p>
<pre class="literal-block">
{"location":"physio/df37_200Hz_1.txt",
 "type":"physio_file",
 "dataset_id":"42bc01a0-a6c3-11e8-9a5b-a0389fb56dc0",
 "dataset_refcommit":"a771150f0e15f309212bc83186d893c65f731d9c",
 "comment":{"approved":false,"value":""},
 "subject":{"approved":false,"value":"df37"},
 "anon_subject":{"approved":false,"value":"002"},
 "bids_run":{"approved":false,"value":"01"},
 "bids_session":{"approved":false,"value":null},
 "bids_task":{"approved":true,"value":"oneback"},
 "sampling-frequency": {"approved": true, "value": "200Hz"},
 "procedures":[{"procedure-name":{"approved":true,"value":"hirni-physiobox-converter"}}],
}
</pre>
<p>Note, that the keys "subject", "anon_subject", "bids_task" were not specified in
the call but still created for this snippet (assuming they can be concluded as described above).
If there was only one run in the existing data there would also be no need to specify it in
the call to <cite>spec4anything</cite>.</p>
<p>The field <tt class="docutils literal">procedures</tt> defines a list of datalad-procedures to be called on conversion.
They can refer to procedures provided by datalad-hirni's toolbox or any other procedure you defined.
For details on how to this, please refer to <tt class="docutils literal">datalad <span class="pre">run-procedure</span> <span class="pre">--help</span></tt>.</p>
<p>Note, that the procedure in this example (<cite>hirni-physiobox-converter</cite>) is provided by the toolbox and expects a field <cite>sampling-frequency</cite> in the specification snippet.
You might need different values and/or keys depending on your data. Generally, you can add arbitrary fields to the specification whether or not they are currently needed by any procedure.
Thereby you can enhance metadata for everything within your study dataset in a machine-readable shape, that potentially can be processed later on.</p>

  </div>
</article>
    </div>

    <footer>
      <p><small>
          Acknowledgment: funded by the federal state of Saxony-Anhalt and the "European Regional Development Fund" (ERDF 2014-2020), Project: Center for Behavioral Brain Sciences (CBBS), FKZ: ZS/2016/04/78113
      </small></p>
      <p><small>
        content licensed <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">cc-by-sa</a>
        <span class='break'>—</span> ©2017–2018 Team Brawndo <span class='break'>—</span>
        unless <a rel="license" href='../../copyright.html'>indicated otherwise</a>
      </small></p>
    </footer>
  </main>
</body>
</html>