<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Team Brawndo" />
  <title>CBBS Imaging Docs &ndash; Creating a study dataset</title>
  <link rel="license" hreflang="en" href="../../copyright.html" />

  <link rel="stylesheet" type="text/css" href="../../theme/css/style.css">
</head>

<body>
  <aside>
    <h1><a href="/">CBBS Imaging Docs</a></h1>
    <nav>
      <ul>

              <li><a href="../../services/">Services Provided</a></li>
              <li>
                <a href="../../processing/">Data Processing</a>

                <ul>
                  <li>
                    <a class="active" href="../../processing/creation/">Creating a study dataset</a>
<div id="toc"><ul><li><a class="toc-href" href="#preparation" title="Preparation">Preparation</a></li><li><a class="toc-href" href="#dataset-creation" title="Dataset creation">Dataset creation</a></li><li><a class="toc-href" href="#adding-an-mri-session" title="Adding an MRI session">Adding an MRI session</a></li></ul></div>                  </li>
                  <li>
                    <a href="../../processing/conversion/">Raw Data Conversion</a>
                  </li>
                </ul>
              </li>
              <li><a href="../../devices/">Data Acquisition Devices</a></li>
              <li><a href="../../tools/">Tools</a></li>
              <li><a href="../../faq/">Frequently Asked Questions</a></li>
              <li><a href="../../contributing/">Contributing to the Docs</a></li>
      </ul>
    </nav>
    <form class="searchbox" action="../../search.html">
      <input type="text" name="q" id="tipue_search_input" placeholder="Search">
    </form>
  </aside>

  <main>
    <div id="funders">
      <img id="cbbs" src="../../theme/img/cbbs_logo.png" alt="Logo of CBBS">
      <img id="efre" src="../../theme/img/EFRE_rgb_web.jpg"
           alt="Signets of Saxony-Anhalt and the European Regional Development Fund">
    </div>
    <div id='content'>
<article>
  <header>
    <nav>
      <ul class="breadcrumbs">
        <li><a href="../../">Home</a></li>
        <li> > <a href="../../processing/">Data Processing</a></li>
        <li> > Creating a study dataset</li>
      </ul>
    </nav>
    <h1>Creating a study dataset</h1>
  </header>

  <div>
    <div class="section" id="preparation">
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline"><i class="icon-link"></i></a></h2>
<p>Start off by installing <a class="reference external" href="https://github.com/psychoinformatics-de/cbbs-imaging-container-import">https://github.com/psychoinformatics-de/cbbs-imaging-container-import</a>,
which also provides additional tools apart from sheer creation:
<tt class="docutils literal">datalad install <span class="pre">-s</span> <span class="pre">https://github.com/psychoinformatics-de/cbbs-imaging-container-import</span> <span class="pre">[INSTALL-DIR]</span></tt></p>
<p>After successful installation run the following command to retrieve the actual container image:
<tt class="docutils literal">datalad get <span class="pre">INSTALL-DIR/cbbs-imaging.simg</span></tt></p>
</div>
<div class="section" id="dataset-creation">
<h2 id="dataset-creation">Dataset creation<a class="headerlink" href="#dataset-creation" title="Permalink to this headline"><i class="icon-link"></i></a></h2>
<p>To create a study dataset you just need to run:
<tt class="docutils literal">singularity run <span class="pre">INSTALL-DIR/cbbs-imaging.simg</span> create <span class="pre">[TARGET-DIR]</span></tt>.
If you don't provide a target dir, the dataset will be created in the current working directory.</p>
</div>
<div class="section" id="adding-an-mri-session">
<h2 id="adding-an-mri-session">Adding an MRI session<a class="headerlink" href="#adding-an-mri-session" title="Permalink to this headline"><i class="icon-link"></i></a></h2>
<p>The above mentioned container also provides a command to import a tarball for a session.
This will result in a subdataset with the DICOMs in it, that provides the DICOM metadata for easy access via <cite>datalad</cite>.</p>
<p>To import such a tarball just run
<tt class="docutils literal">singularity run <span class="pre">[--bind=/path/to/tarball]</span> <span class="pre">INSTALL-DIR/cbbs-imaging.simg</span> import [TARBALL]</tt>
from within your study dataset. You don't need to be at its root directory, but you need to make sure, you aren't accidentally in a subdataset. Therefore the study dataset's root is a safe practice to follow.</p>
<p>Note, that TARBALL needs to be an absolute path at the moment.
Particularly if TARBALL is located outside your HOME directory, you may need to provide its location to the container via the <cite>--bind</cite> option.</p>
<p>A session name like <cite>af29_0678</cite> will be derived from the dicoms' metadata and a subdirectory with that is created.
In that subdirectory you should then find a <cite>studyspec.json</cite>, which is needed for conversion later on and a subdirectory <cite>dicoms</cite>, which is in fact a subdataset containing the actual dicoms.</p>
</div>

  </div>
</article>
    </div>

    <footer>
      <p><small>
          Acknowledgment: funded by the federal state of Saxony-Anhalt and the "European Regional Development Fund" (ERDF 2014-2020), Vorhaben: Center for Behavioral Brain Sciences (CBBS), FKZ: ZS/2016/04/78113
      </small></p>
      <p><small>
        content licensed <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">cc-by-sa</a>
        <span class='break'>—</span> ©2017–2018 Team Brawndo <span class='break'>—</span>
        unless <a rel="license" href='../../copyright.html'>indicated otherwise</a>
      </small></p>
    </footer>
  </main>
</body>
</html>